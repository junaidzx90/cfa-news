const cfanews=new Vue({el:"#cfa_news",data:{isDisabled:!0,cfaNewsObj:[],currentFilter:"",currentPage:1,numrows:0},methods:{news_year_filter:function(a,e){cfanews.currentPage=1,cfanews.currentFilter=e,jQuery.ajax({type:"get",url:cfa_news_ajax.ajaxurl,data:{action:"get_news_data",nonce:cfa_news_ajax.nonce,filter:cfanews.currentFilter},beforeSend:function(){cfanews.isDisabled=!0},dataType:"json",success:function(e){cfanews.isDisabled=!1,e.success&&(cfanews.cfaNewsObj=e.success),e.numrows&&(cfanews.numrows=e.numrows),jQuery(document).find(".years_btns .cfaActive").removeClass("cfaActive"),jQuery(a.target).addClass("cfaActive")}})},loadmore_news:function(){jQuery.ajax({type:"get",url:cfa_news_ajax.ajaxurl,data:{action:"get_news_data",nonce:cfa_news_ajax.nonce,filter:cfanews.currentFilter,page:cfanews.currentPage+1},beforeSend:function(){cfanews.isDisabled=!0},dataType:"json",success:function(e){cfanews.isDisabled=!1,e.success&&0<e.success.length&&(e.success.forEach(e=>{cfanews.cfaNewsObj.push(e)}),cfanews.currentPage+=1),e.numrows&&(cfanews.numrows=e.numrows)}})}},mounted:function(){let e=new Promise((a,e)=>{jQuery.ajax({type:"get",url:cfa_news_ajax.ajaxurl,data:{action:"get_news_data",nonce:cfa_news_ajax.nonce},dataType:"json",success:function(e){a(e)}})});e.then(e=>{cfanews.isDisabled=!1,e.success&&(cfanews.cfaNewsObj=e.success,cfanews.currentPage=cfanews.cfaNewsObj.length),e.numrows&&(cfanews.numrows=e.numrows)})}});